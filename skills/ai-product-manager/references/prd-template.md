# PRD模板与写作指南

## 目录
- [PRD结构模板](#prd结构模板)
- [需求描述规范](#需求描述规范)
- [非功能需求](#非功能需求)
- [数据需求](#数据需求)
- [验收标准](#验收标准)
- [写作技巧](#写作技巧)

## 概览
本文档提供标准的产品需求文档（PRD）模板和写作指南，帮助AI产品经理产出清晰、完整、可执行的产品需求文档。

## PRD结构模板

### 完整PRD结构

```
一、项目背景与目标
   1.1 项目背景
   1.2 项目目标
   1.3 目标用户
   1.4 竞品分析

二、用户画像与场景
   2.1 用户角色
   2.2 使用场景
   2.3 用户痛点

三、产品概述
   3.1 产品定位
   3.2 核心功能
   3.3 产品架构

四、功能需求
   4.1 功能1：[功能名]
       4.1.1 功能描述
       4.1.2 用户故事
       4.1.3 交互流程
       4.1.4 输入输出
       4.1.5 验收标准
   4.2 功能2：[功能名]
   ...

五、非功能需求
   5.1 性能需求
   5.2 安全需求
   5.3 可用性需求
   5.4 兼容性需求

六、数据需求
   6.1 数据结构
   6.2 埋点需求
   6.3 数据权限

七、AI能力需求（AI产品专属）
   7.1 核心AI能力
   7.2 能力边界
   7.3 评估指标

八、风险与约束
   8.1 技术风险
   8.2 业务风险
   8.3 资源约束

九、版本规划
   9.1 MVP版本
   9.2 迭代计划

十、附录
   10.1 术语表
   10.2 参考资料
```

### 最小化PRD模板（MVP版本）

```
一、项目背景
   1.1 项目目标：[一句话描述核心目标]
   1.2 目标用户：[目标用户画像]

二、核心功能（MVP）
   功能1：[名称]
     - 功能描述：
     - 用户故事：
     - 验收标准：

   功能2：[名称]
     - 功能描述：
     - 用户故事：
     - 验收标准：

三、非功能需求
   - 性能：[关键性能指标]
   - 安全：[安全要求]

四、评估指标
   - 指标1：[定义]
   - 指标2：[定义]
```

## 需求描述规范

### 1. 功能描述模板

#### 标准模板
```
功能名称：[功能名]
功能编号：[F-001]
优先级：[P0/P1/P2/P3]
状态：[待开发/开发中/已完成/已发布]

功能描述：
[用1-2句话描述功能的核心价值和目标]

用户故事：
作为一个[用户角色]
我想要[做什么/得到什么]
以便[达成什么目标]

业务价值：
[描述该功能对用户和业务的价值]

前置条件：
- [前置条件1]
- [前置条件2]

输入：
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| [参数1] | [类型] | [是/否] | [说明] | [示例] |
| [参数2] | [类型] | [是/否] | [说明] | [示例] |

输出：
| 字段名 | 类型 | 说明 | 示例 |
|-------|------|------|------|
| [字段1] | [类型] | [说明] | [示例] |
| [字段2] | [类型] | [说明] | [示例] |

交互流程：
[流程图或步骤描述]

业务规则：
1. [规则1]
2. [规则2]

异常处理：
| 异常场景 | 处理方式 | 提示文案 |
|---------|---------|---------|
| [异常1] | [处理方式] | [提示文案] |
| [异常2] | [处理方式] | [提示文案] |

验收标准：
- [AC1]：[具体可验证的标准]
- [AC2]：[具体可验证的标准]
- [AC3]：[具体可验证的标准]

依赖关系：
- 依赖：[依赖的功能或资源]
- 被依赖：[依赖此功能的功能]

相关原型：
- [原型链接/截图]
```

#### 示例：智能客服-FAQ自动回答
```
功能名称：FAQ自动回答
功能编号：F-001
优先级：P0
状态：待开发

功能描述：
基于用户提问，从FAQ知识库中自动匹配并返回答案，解决常见咨询问题。

用户故事：
作为一个客服用户
我想要快速获得常见问题的答案
以便节省等待人工客服的时间

业务价值：
- 提升用户咨询效率
- 降低人工客服工作量
- 提高7x24小时服务能力

前置条件：
- FAQ知识库已录入
- 用户已登录

输入：
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| question | String | 是 | 用户提问内容 | "如何申请退款？" |
| sessionId | String | 是 | 会话ID | "sess_001" |

输出：
| 字段名 | 类型 | 说明 | 示例 |
|-------|------|------|------|
| answer | String | 匹配的答案 | "退款流程如下..." |
| confidence | Float | 匹配置信度(0-1) | 0.95 |
| suggestions | Array | 相关问题推荐 | ["退款需要多久？"] |

交互流程：
1. 用户输入问题
2. 系统进行意图识别和答案匹配
3. 返回匹配结果（置信度>0.8）
4. 如果置信度<0.8，提供相关问题推荐
5. 如果无法匹配，引导转人工

业务规则：
1. 仅返回置信度>0.8的答案
2. 每次最多返回3个相关问题推荐
3. 记录用户提问和匹配结果，用于知识库优化

异常处理：
| 异常场景 | 处理方式 | 提示文案 |
|---------|---------|---------|
| 未找到匹配答案 | 推荐相关问题 | "抱歉，没有找到相关答案，您是否想了解..." |
| 知识库为空 | 引导转人工 | "知识库暂时为空，请稍后再试或联系人工客服" |
| 系统异常 | 引导转人工 | "系统繁忙，请稍后再试或联系人工客服" |

验收标准：
- AC1：能够正确识别用户提问并匹配答案（准确率>90%）
- AC2：响应时间<3秒
- AC3：置信度<0.8时提供相关问题推荐
- AC4：记录所有用户提问和匹配结果

依赖关系：
- 依赖：知识库管理功能（F-005）
- 被依赖：数据分析功能（F-010）

相关原型：
- [FAQ对话界面原型图]
```

### 2. 用户故事模板

#### 用户故事格式
```
用户故事编号：US-001
功能模块：[功能模块名]
优先级：[P0/P1/P2/P3]
预估工时：[人天]

作为 [用户角色]
我想要 [具体需求]
以便 [达成什么目标]

背景描述：
[描述需求的背景和上下文]

验收标准（Acceptance Criteria）：
- AC1：[Given 前置条件] [When 触发操作] [Then 预期结果]
- AC2：[Given 前置条件] [When 触发操作] [Then 预期结果]
- AC3：[Given 前置条件] [When 触发操作] [Then 预期结果]

验收测试用例：
TC-001：
- 测试步骤：[步骤1、步骤2...]
- 预期结果：[预期结果]

TC-002：
- 测试步骤：[步骤1、步骤2...]
- 预期结果：[预期结果]
```

#### 示例：代码生成功能
```
用户故事编号：US-003
功能模块：代码助手
优先级：P0
预估工时：5人天

作为 开发者
我想要根据自然语言描述生成代码
以便提高编码效率

背景描述：
开发者在日常工作中经常需要编写重复性的代码，如CRUD操作、API调用等，希望通过AI自动生成基础代码框架，减少重复劳动。

验收标准：
- AC1：Given 用户输入"生成一个Python Flask的API接口，包含GET和POST方法" When 点击"生成代码"按钮 Then 在5秒内生成完整的Flask API代码
- AC2：Given 生成的代码包含GET方法 When 用户运行代码 Then 接口能够正常响应GET请求
- AC3：Given 生成的代码包含POST方法 When 用户运行代码 Then 接口能够正常接收并处理POST请求
- AC4：Given 用户不满意生成的代码 When 点击"重新生成" Then 生成不同风格的代码实现

验收测试用例：
TC-001：
- 测试步骤：用户输入"生成用户管理API，包含增删改查功能" → 点击生成
- 预期结果：生成完整的用户管理API代码，包含Create、Read、Update、Delete方法

TC-002：
- 测试步骤：运行生成的代码 → 发送GET请求到/users
- 预期结果：成功返回用户列表数据
```

### 3. 交互流程描述

#### 流程图表示法
使用标准的流程图符号：
- 圆角矩形：开始/结束
- 矩形：处理步骤
- 菱形：判断/决策
- 平行四边形：输入/输出

#### 文字描述法
```
步骤1：用户输入问题
   └─ 输入：用户提问内容
   └─ 触发：用户点击"发送"按钮

步骤2：系统处理
   ├─ 步骤2.1：进行意图识别
   │   └─ 输出：意图类别、关键词
   └─ 步骤2.2：匹配答案
       ├─ 如果 置信度>0.8
       │   └─ 返回答案
       └─ 如果 置信度≤0.8
           └─ 返回相关问题推荐

步骤3：用户操作
   ├─ 如果 用户点击答案
   │   └─ 标记为有效回答
   └─ 如果 用户点击相关问题
       └─ 重新执行步骤2
```

## 非功能需求

### 1. 性能需求

#### 响应时间要求
```
| 功能模块 | 响应时间要求 | 说明 |
|---------|-------------|------|
| 页面加载 | <2秒 | 首页、主要页面 |
| API响应 | <500ms | 接口调用 |
| AI生成 | <5秒 | 代码生成、内容生成 |
| 数据查询 | <1秒 | 列表查询 |
| 数据导出 | <30秒 | 大量数据导出 |
```

#### 并发支持
```
| 场景 | 并发要求 | 说明 |
|-----|---------|------|
| 日常峰值 | 1000 QPS | 正常业务高峰 |
| 大促峰值 | 5000 QPS | 活动期间 |
| 数据写入 | 500 TPS | 数据写入频率 |
```

#### 系统可用性
```
- 可用性目标：99.9%（年停机时间<8.76小时）
- 容灾要求：支持异地多活，RPO<5分钟，RTO<30分钟
- 备份要求：每日全量备份，每小时增量备份
```

### 2. 安全需求

#### 数据安全
```
- 数据传输：全站HTTPS加密传输
- 数据存储：敏感数据加密存储（AES-256）
- 数据备份：定期备份，保留30天
- 数据删除：用户可申请删除个人数据
```

#### 访问控制
```
- 身份认证：支持账号密码、手机号、第三方登录
- 权限管理：基于角色的访问控制（RBAC）
- 会话管理：会话超时时间30分钟
- 敏感操作：二次验证（如密码修改、删除操作）
```

#### API安全
```
- 接口鉴权：Token认证
- 限流控制：1000次/分钟/用户
- 参数校验：所有输入参数必须校验
- SQL注入防护：参数化查询
- XSS防护：输入输出过滤
```

### 3. 可用性需求

#### 易用性
```
- 学习成本：新用户5分钟内能上手
- 操作步骤：核心功能操作步骤≤3步
- 帮助文档：提供完整的操作指南
- 错误提示：清晰、友好、可操作
```

#### 可访问性
```
- 浏览器支持：Chrome、Safari、Firefox、Edge最新两个版本
- 移动端支持：iOS 12+、Android 8+
- 网络要求：支持4G/5G/Wi-Fi网络
```

### 4. 兼容性需求

#### 浏览器兼容
```
- Chrome：90+
- Safari：14+
- Firefox：88+
- Edge：90+
```

#### 设备兼容
```
- PC端：Windows 10+、macOS 11+
- 移动端：iPhone 8+、Android 8+
- 平板：iPad Pro、Android平板
```

## 数据需求

### 1. 数据结构

#### 数据字典
```
表名：user（用户表）
| 字段名 | 类型 | 长度 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|------|
| user_id | BigInt | - | 是 | 用户ID（主键） | 10001 |
| username | Varchar | 50 | 是 | 用户名 | "alice" |
| email | Varchar | 100 | 是 | 邮箱 | "alice@example.com" |
| password | Varchar | 64 | 是 | 密码（加密） | "e10adc394..." |
| created_at | DateTime | - | 是 | 创建时间 | "2024-01-01 00:00:00" |
| updated_at | DateTime | - | 是 | 更新时间 | "2024-01-01 00:00:00" |

表名：conversation（对话表）
| 字段名 | 类型 | 长度 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|------|
| conv_id | BigInt | - | 是 | 对话ID（主键） | 20001 |
| user_id | BigInt | - | 是 | 用户ID（外键） | 10001 |
| title | Varchar | 200 | 否 | 对话标题 | "代码生成对话" |
| created_at | DateTime | - | 是 | 创建时间 | "2024-01-01 00:00:00" |

表名：message（消息表）
| 字段名 | 类型 | 长度 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|------|
| msg_id | BigInt | - | 是 | 消息ID（主键） | 30001 |
| conv_id | BigInt | - | 是 | 对话ID（外键） | 20001 |
| role | Varchar | 20 | 是 | 角色（user/assistant） | "user" |
| content | Text | - | 是 | 消息内容 | "生成一个Python函数..." |
| created_at | DateTime | - | 是 | 创建时间 | "2024-01-01 00:00:00" |
```

### 2. 埋点需求

#### 埋点事件清单
```
1. 页面浏览事件（page_view）
   - 事件描述：用户访问页面
   - 触发条件：页面加载完成
   - 参数：page_name, page_url, user_id

2. 功能点击事件（function_click）
   - 事件描述：用户点击功能按钮
   - 触发条件：点击功能按钮
   - 参数：function_name, function_id, user_id

3. AI生成事件（ai_generate）
   - 事件描述：AI生成内容
   - 触发条件：用户提交生成请求
   - 参数：generate_type, input_length, output_length, user_id

4. 用户反馈事件（user_feedback）
   - 事件描述：用户对结果进行评价
   - 触发条件：用户点击评价按钮
   - 参数：feedback_type, feedback_score, user_id

5. 错误事件（error）
   - 事件描述：系统错误
   - 触发条件：发生系统错误
   - 参数：error_code, error_message, page_name
```

#### 埋点参数说明
```
通用参数：
- user_id：用户ID
- session_id：会话ID
- timestamp：时间戳
- device_type：设备类型（PC/Mobile）
- app_version：应用版本

事件特定参数：
- 根据事件类型定义特定参数
```

### 3. 数据权限

#### 权限模型
```
数据权限等级：
- 公开数据：所有用户可访问
- 登录用户数据：登录后可访问
- 私有数据：仅本人可访问
- 管理员数据：仅管理员可访问
```

#### 敏感数据处理
```
- 脱敏展示：手机号、邮箱、身份证等脱敏展示
- 访问日志：记录数据访问日志
- 审计追踪：重要操作审计追踪
```

## 验收标准

### 1. 验收标准定义原则

**SMART原则**：
- Specific（具体的）：标准明确无歧义
- Measurable（可测量的）：能够量化或明确判断
- Achievable（可实现的）：技术上可实现
- Relevant（相关的）：与业务目标相关
- Time-bound（有时限的）：在特定时间内完成

### 2. 验收标准模板

#### 功能验收标准
```
功能名称：[功能名]
验收标准编号：AC-[001]

AC-001：[Given 前置条件] [When 触发操作] [Then 预期结果]

测试方法：
[描述如何测试]

通过标准：
[描述如何判断通过]

失败处理：
[失败后如何处理]
```

#### 示例：代码生成功能验收
```
功能名称：代码生成
验收标准编号：AC-003

AC-003：
Given 用户输入"生成一个Python函数，实现快速排序算法"
When 用户点击"生成代码"按钮
Then 在5秒内生成完整的Python快速排序代码，代码可执行且排序结果正确

测试方法：
1. 打开代码生成页面
2. 输入需求描述
3. 点击生成按钮
4. 等待生成结果
5. 执行生成的代码
6. 验证排序结果

通过标准：
- 生成时间<5秒
- 代码可运行无报错
- 排序结果正确（对测试数据进行验证）

失败处理：
- 如果生成失败，记录错误信息并提示用户重试
- 如果代码无法运行，提供错误信息和修复建议
```

### 3. 验收测试用例

#### 测试用例模板
```
测试用例编号：TC-[001]
测试用例名称：[测试用例名称]
优先级：[P0/P1/P2]

前置条件：
[描述测试前的准备工作]

测试步骤：
1. [步骤1]
2. [步骤2]
3. [步骤3]

预期结果：
[描述预期的测试结果]

实际结果：
[测试时填写]

测试状态：
[通过/失败]

备注：
[其他说明]
```

#### 示例：FAQ自动回答测试
```
测试用例编号：TC-005
测试用例名称：FAQ自动回答-正常场景
优先级：P0

前置条件：
- FAQ知识库已录入"如何申请退款"相关问题
- 用户已登录

测试步骤：
1. 打开客服对话框
2. 输入"如何申请退款？"
3. 点击发送
4. 查看返回结果

预期结果：
- 在3秒内返回答案
- 返回的答案正确且完整
- 置信度>0.8

实际结果：
[测试时填写]

测试状态：
[通过/失败]

备注：
无
```

## 写作技巧

### 1. 清晰性原则

**使用简单句**：
```
❌ 用户在点击了发送按钮之后，系统会在接收到请求的情况下进行相关的处理操作
✓ 用户点击发送按钮后，系统处理请求
```

**避免歧义**：
```
❌ 用户可以查看相关文章
✓ 用户可以查看与当前文章相关的5篇文章
```

**使用具体数字**：
```
❌ 响应速度要快
✓ 响应时间<3秒
```

### 2. 完整性原则

**涵盖所有场景**：
- 正常场景
- 异常场景
- 边界场景

**示例**：
```
正常场景：用户输入完整信息，成功注册
异常场景：用户输入邮箱格式错误
边界场景：用户名长度刚好达到上限
```

**定义输入输出**：
- 明确输入参数的格式、约束、示例
- 明确输出字段的含义、格式、示例

### 3. 一致性原则

**术语统一**：
- 在整个文档中使用统一的术语
- 建立术语表

**格式统一**：
- 相同类型的内容使用统一的格式
- 如表格、列表、流程图的格式保持一致

**编号规范**：
- 功能编号：F-001, F-002...
- 用户故事编号：US-001, US-002...
- 验收标准编号：AC-001, AC-002...
- 测试用例编号：TC-001, TC-002...

### 4. 可读性原则

**使用标题和段落**：
- 合理划分层级
- 每个段落聚焦一个主题

**使用列表和表格**：
- 列表适用于列举、步骤
- 表格适用于对比、参数说明

**使用图表**：
- 流程图：展示流程逻辑
- 时序图：展示交互时序
- 状态图：展示状态转换

### 5. AI产品PRD特殊要求

**AI能力描述**：
```
功能名称：AI代码生成
核心AI能力：
- 代码理解：理解用户需求描述
- 代码生成：生成符合要求的代码
- 代码优化：优化代码结构和性能

能力边界：
- 支持语言：Python、JavaScript、Java
- 代码长度：单次生成<1000行
- 复杂度：中等复杂度及以下

评估指标：
- 代码可执行率：>90%
- 代码正确性：>85%
- 用户满意度：>4.0分
```

**人机协同描述**：
```
协同模式：
- AI生成：AI生成代码草稿
- 人工审核：用户Review代码
- 人工修改：用户修改代码
- AI优化：AI根据修改优化生成逻辑

交互流程：
1. 用户输入需求
2. AI生成代码
3. 用户查看代码
4. 用户接受/修改/重新生成
5. AI学习用户偏好
```

## 示例

### 完整PRD示例片段

#### 项目背景
```
1.1 项目背景
随着AI技术的发展，越来越多的开发团队希望使用AI工具提升开发效率。然而，市面上的代码助手产品普遍存在以下问题：
1. 代码生成质量不稳定，需要大量人工修改
2. 缺少对业务场景的理解，生成的代码难以直接使用
3. 人机协同流程不顺畅，影响开发体验

基于以上分析，我们计划开发一款智能代码助手，通过深度理解业务场景，提供高质量的代码生成服务。

1.2 项目目标
- 短期目标（3个月）：发布MVP版本，支持基础代码生成功能，用户满意度>4.0
- 中期目标（6个月）：支持更多编程语言，代码可执行率>90%
- 长期目标（1年）：打造智能开发助手生态，成为开发者首选工具

1.3 目标用户
- 全栈开发者：日常需要编写多种语言的代码
- 后端开发者：专注于API开发、业务逻辑实现
- 初级开发者：需要学习和参考代码实现

1.4 竞品分析
主要竞品包括GitHub Copilot、Tabnine、CodeLlama等，本产品的差异化优势在于：
1. 更强的业务理解能力
2. 更友好的人机协同体验
3. 更灵活的自定义能力
```

#### 功能需求（部分）
```
4.1 功能1：代码生成
功能编号：F-001
优先级：P0
状态：待开发

功能描述：
根据用户的自然语言描述，自动生成符合要求的代码，包括函数、类、API接口等。

用户故事：
作为一个开发者
我想要通过描述需求自动生成代码
以便减少重复编码工作，提高开发效率

业务价值：
- 提升编码效率：减少30-50%编码时间
- 降低错误率：自动生成代码质量稳定
- 加速学习：为新开发者提供代码参考

前置条件：
- 用户已登录
- 用户已选择编程语言

输入：
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| requirement | String | 是 | 需求描述 | "生成一个Python Flask API，实现用户增删改查" |
| language | String | 是 | 编程语言 | "Python" |
| framework | String | 否 | 框架 | "Flask" |
| style | String | 否 | 代码风格 | "PEP8" |

输出：
| 字段名 | 类型 | 说明 | 示例 |
|-------|------|------|------|
| code | String | 生成的代码 | "from flask import Flask..." |
| explanation | String | 代码解释 | "这是一个基于Flask的RESTful API..." |
| suggestions | Array | 优化建议 | [{"type": "error", "msg": "..."}] |

交互流程：
1. 用户在代码编辑器中输入需求描述
2. 选择编程语言和框架
3. 点击"生成代码"按钮
4. 系统调用AI模型生成代码
5. 展示生成的代码和解释
6. 用户可以：
   - 一键接受：直接插入代码
   - 手动编辑：修改代码后插入
   - 重新生成：调整参数重新生成
7. AI记录用户操作，学习用户偏好

业务规则：
1. 生成时间<5秒
2. 代码可执行率>90%
3. 支持Python、JavaScript、Java三种语言
4. 单次生成代码长度<1000行
5. 代码包含完整注释

异常处理：
| 异常场景 | 处理方式 | 提示文案 |
|---------|---------|---------|
| 需求描述不清 | 引导用户提供更多信息 | "请详细描述您的需求，包括功能、输入输出等" |
| 超出能力边界 | 拒绝并提供替代方案 | "抱歉，当前暂不支持该需求，您可以尝试拆分为多个简单需求" |
| 生成失败 | 记录日志，提示用户重试 | "生成失败，请稍后重试" |

验收标准：
- AC1：Given 用户输入"生成Python快速排序函数" When 点击生成 Then 在5秒内生成可执行的快速排序代码
- AC2：Given 生成的代码 When 用户运行 Then 代码无语法错误，排序结果正确
- AC3：Given 用户修改代码后重新生成 When AI学习 Then 下次生成时体现用户偏好
- AC4：Given 用户输入复杂需求超出能力边界 When AI响应 Then 返回友好的拒绝提示和替代方案

依赖关系：
- 依赖：用户认证功能（F-001）、代码编辑器（F-002）
- 被依赖：代码优化功能（F-004）、代码评估功能（F-005）

相关原型：
- [代码生成界面原型图]
- [代码编辑器交互流程图]
```

#### 非功能需求（部分）
```
5.1 性能需求
| 功能模块 | 响应时间要求 | 说明 |
|---------|-------------|------|
| 代码生成 | <5秒 | 生成500行以内的代码 |
| 代码解释 | <3秒 | 生成代码解释说明 |
| 代码优化 | <10秒 | 分析并优化代码结构 |

5.2 安全需求
- 代码存储：用户代码加密存储，仅本人可见
- 接口安全：所有API接口需要Token认证
- 参数校验：所有输入参数必须校验，防止注入攻击

5.3 AI能力需求
7.1 核心AI能力
- 代码理解：理解自然语言需求，提取关键信息（准确率>90%）
- 代码生成：生成符合语法和规范的代码（可执行率>90%）
- 代码优化：优化代码结构和性能（优化效果提升>30%）

7.2 能力边界
- 支持语言：Python、JavaScript、Java
- 代码复杂度：中等复杂度及以下（循环嵌套≤3层）
- 领域限制：Web开发、数据处理、算法实现

7.3 评估指标
- 准确性：代码可执行率>90%、代码正确性>85%
- 用户体验：用户满意度>4.0、采纳率>80%
- 效率：编码效率提升>50%、响应时间<5秒
```
